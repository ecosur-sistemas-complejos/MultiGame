GETTING STARTED

GIT

Multi-Game uses Git for version control. If you are not familiar with Git, you can 
learn about how to use it (after downloading a distribution) with the following
tutorial on GitHub:

http://try.github.com/levels/1/challenges/1

The top-level project (MultiGame) and all public submodules are stored on GitHub: 

https://github.com/ecosur-sistemas-complejos/MultiGame

All releases are tagged and two main branches exist: Master and Development. The Master
branch always contains the latest "released" code, while development contains the working
branch.


SUBMODULES

Multi-Game uses git submodules to reference the dependent projects that make it work.  
We have split off the project into four separate aspects: Deploy, Engine, Games and
Research.  Each submodule contains it's entire history from the onset of the project, with
all history prior to the division into submodules held in the top-level project.

To get started, simply do the following from the top of this project (MultiGame) after
your successful clone:

    $git submodule init
    $git submodule update

Then checkout the development branch in the module you want and you're ready to contribute!

    $cd "SUB_MODULE"
    $git checkout -B development

If you're using git-flow, you could then start work on "featureName" with the following:

    $git flow init
    $git flow feature start "featureName"

NOTE: Be sure to use "git submodule update" when moving in-between branches at the top-level.


JBOSS AS6 CONFIGURATION

1. MySQL-DS.xml and Persistence.xml.

   Hibernate is the default database provider for JBoss BUT Multi-Game is configured to run
   with MySQL.

   For convenience, we have placed a sample mysql-ds.xml file in the resources of the
   EcosurJPA module, which can be used with a properly configured MySQL server
   
   NOTE:  Users may also use the default hibernate dialect to work with the default JBoss
   database (hsql) by modifying the marked and commented areas of the persistence.xml file
   and commenting out the mysql specific locations.

2. Local users and roles.  The file "jbossws-users.properties" controls user access to
   the server as part of the local file domain.  Please edit this file to contain the
   users and passwords that you wish to authenticate.  The file "jbossws-roles.properties"
   must be modified to contain the username + "=" and the group "MultiGame" for all users
   created in the jbossws-users.properties file that need access to multi-game.

3. Topics and ConnectionFactory. The file "hornetq-jms.xml" contains the definitions of the
   two Topics that the game subscribes to. This file is included in the WAR file generated by
   this project and included in the deployable EAR.

4. BLAZEDS
   Two jar files from the "blazeds-3.3 turnkey distribution" are required to be placed in an accessible
   "lib" directory on the JBoss server (this has not been tested on Glassfish). These files are
   "flex-tomcat-common.jar" and "flex-tomcat-server.jar". They are used by BLAZEDS to perform remote
   authentication for the AdobeAIR/mobile client.

   Place both files into the <<JBOSS_HOME>>/server/default/lib folder.

    Please see the following link for context:

         http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=services_security_2.html

    And the following link to download the "turnkey" install:

         http://opensource.adobe.com/wiki/display/blazeds/download+blazeds+3

5. MYSQL JDBC
    Add the mysql-connector jar to the default lib directory. For example, on JBoss:
        
        mv mysql-connector-java-5.1.17-bin.jar $JBOSS_HOME/server/default/lib

MYSQL DATABASE CONFIGURATION

   In order to use MySQL with MultiGame you will need to do the following on the server
   where your application server is installed.

   1. Install MySQL.
   2. Connect to local MySQL server as root, and create the database "multigame".
   3. Create and Grant all rights to user 'mg'@'localhost' on multigame:
            grant all on multigame.* to 'mg'@'localhost' identified by 'secret'
   4. Check that the mysql-connector jar is in the default lib directory. 
            ls -la $JBOSS_HOME/server/default/lib/mysql-connector-java-5.1.17-bin.jar 
   
Start the server and deploy the ear generated by the EcosurEAR project. Note: the 
ables will be created by JPA on deploy, wiping out any previous data that may have 
been in the database.

Note:  If you change the username or password in step 3, please update the
deployed mysql-ds.xml and restart the JBoss server.


FLEXMOJOS INTERNATIONALIZATION CONFIGURATION

 This project is internationalized in English and Spanish, so it requires access to
 the Spanish flex framework locale files.  

 Unfortunately flex mojos requires localized versions of the flashplayer core libraries. 
 These must be imported from the us_US bundle. (Please replace "${flex-version}" below
 with the current version as defined in the games-module POM.)

 mvn install:install-file -DgroupId=com.adobe.flex.framework -DartifactId=flash-integration
     -Dversion=${flex-version} -Dclassifier=es_ES -Dpackaging=rb.swc
     -Dfile=/path/to/flex-sdk/frameworks/locale/en_US/flash-integration_rb.swc

 mvn install:install-file -DgroupId=com.adobe.flex.framework -DartifactId=playerglobal
    -Dversion=${flex-version} -Dclassifier=es_ES -Dpackaging=rb.swc
    -Dfile=/path/to/flex-sdk/frameworks/locale/en_US/playerglobal_rb.swc

 For more information:
    http://groups.google.com/group/flex-mojos/browse_thread/thread/5b5ff62290d1cb56/d7013abdae604828


FLEX MOBILE THEME

The "mobile" theme is available with the Flex SDK, under the frameworks/mobile path. Please install the correct
version with the install plugin.  The following works well (please replace {flex-version} with the current
version):

mvn install:install-file -Dfile=mobile.swc -DgroupId=com.adobe.flex.framework -DartifactId=mobile
    -Dpackaging=swc -Dversion={flex-version}  -DgeneratePom=true


FLEX UNIT 4

  We are currently using FlexUnit 4 for the Flex based part of our unit tests. In order
  to run these tests (and have the build successfully complete), you will need the flash
  player on your build path, referenced as "flashplayer". There is an excellent write-up on
  what to do if you have any troubles, especially if you're using OSX, in the following blog
  post:

  http://seanp33.wordpress.com/2010/09/16/flexmojos-mac-osx-and-the-stand-alone-flash-player-debugger/


**  All other dependencies are managed by means of Maven and repositories included in 
    the top-level pom.xml. **
